
<section>
    <h1 class="text-center text-main mb-5 mt-0 fwb">Forgot Password</h1>
    @if (step==1) {
  <form [formGroup]="verifyEmail" class="border-4 border  p-2 my-2 " (ngSubmit)="verifyEmailSubmit()">

    
        <div class="my-2">
            <label for="email">email :</label>
            <input class="form-control" id="email" type="email" formControlName="email" 
            [ngClass]="{
                'is-valid':!verifyEmail.get('email')?.errors &&(verifyEmail.get('email')?.touched||verifyEmail.get('email')?.dirty),
                'is-invalid':verifyEmail.get('email')?.errors &&(verifyEmail.get('email')?.touched||verifyEmail.get('email')?.dirty)
            }"
            
            >
            @if (verifyEmail.get('email')?.errors &&(verifyEmail.get('email')?.touched||verifyEmail.get('email')?.dirty)) {
                <div class="alert-danger alert w-50 ">
                    @if (verifyEmail.get('email')?.getError('required')) {
                        <p class="m-0">* email Is Required</p>
                    }
                    @else if (verifyEmail.get('email')?.getError('email')) {
                        <p class="m-0">* email Is not valid</p>
                    }
                    </div>
            }
            </div>
            <button [disabled]="verifyEmail.invalid" class="d-block ms-auto btn-main m-3">Verify Email</button>
    </form>}

    @if (step==2) {
        <form [formGroup]="verifyCode" class="border-4 border  p-2 my-2 " (ngSubmit)="verifyCodeSubmit()">
            <div class="my-2">
                <label for="recetCode">recetCode :</label>
                <input class="form-control" id="recetCode" type="text" formControlName="recetCode"
                [ngClass]="{
                    'is-valid':!verifyCode.get('recetCode')?.errors &&(verifyCode.get('recetCode')?.touched||verifyCode.get('recetCode')?.dirty),
                    'is-invalid':verifyCode.get('recetCode')?.errors &&(verifyCode.get('recetCode')?.touched||verifyCode.get('recetCode')?.dirty)
    
    
                }">
                @if (verifyCode.get('recetCode')?.errors &&(verifyCode.get('recetCode')?.touched||verifyCode.get('recetCode')?.dirty)) {
                    <div class="alert-danger alert w-50 ">
                        @if (verifyCode.get('recetCode')?.getError('required')) {
                            <p class="m-0">* Code Is Required</p>
                        }
                        @else if (verifyCode.get('recetCode')?.getError('pattern')) {
                            <p class="m-0">* Code should be 6 chars </p>
                        }
                        </div>
                }
</div>
                <button [disabled]="verifyCode.invalid" class="d-block ms-auto btn-main m-3">Verify code</button>
        </form>
    }
   @if (step==3) {
    <form [formGroup]="recetPassword" class="border-4 border  p-2 my-2 " (ngSubmit)="ResetPasswordSubmit()">
        <div class="my-2">
            <label for="email">email :</label>
            <input class="form-control" id="email" type="email" formControlName="email" 
            [ngClass]="{
                'is-valid':!recetPassword.get('email')?.errors &&(recetPassword.get('email')?.touched||recetPassword.get('email')?.dirty),
                'is-invalid':recetPassword.get('email')?.errors &&(recetPassword.get('email')?.touched||recetPassword.get('email')?.dirty)
            }"
            
            >
            @if (recetPassword.get('email')?.errors &&(recetPassword.get('email')?.touched||recetPassword.get('email')?.dirty)) {
                <div class="alert-danger alert w-50 ">
                    @if (recetPassword.get('email')?.getError('required')) {
                        <p class="m-0">* email Is Required</p>
                    }
                    @else if (recetPassword.get('email')?.getError('email')) {
                        <p class="m-0">* email Is not valid</p>
                    }
                    </div>
            }
            </div>
            <div class="my-2">
                <label for="newPassword">newPassword :</label>
                <input class="form-control" id="newPassword" type="Password" formControlName="newPassword"
                [ngClass]="{
                    'is-valid':!recetPassword.get('newPassword')?.errors &&(recetPassword.get('newPassword')?.touched||recetPassword.get('newPassword')?.dirty),
                    'is-invalid':recetPassword.get('newPassword')?.errors &&(recetPassword.get('newPassword')?.touched||recetPassword.get('newPassword')?.dirty)
    
    
                }">
                @if (recetPassword.get('newPassword')?.errors &&(recetPassword.get('newPassword')?.touched||recetPassword.get('newPassword')?.dirty)) {
                    <div class="alert-danger alert w-50 ">
                        @if (recetPassword.get('newPassword')?.getError('required')) {
                            <p class="m-0">* password Is Required</p>
                        }
                        @else if (recetPassword.get('newPassword')?.getError('pattern')) {
                            <p class="m-0">* Pssword should be at least 6 chars </p>
                        }
                        </div>
                }
</div>
            <button [disabled]="recetPassword.invalid" class="d-block ms-auto btn-main m-3">Reset Password</button>
    </form>
   }
    
</section>

